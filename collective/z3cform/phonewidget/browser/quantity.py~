from zope.schema.interfaces import IFloat
from zope.interface import implements
import zope.component
import zope.interface
import zope.schema.interfaces
from zope import schema
from zope.schema.fieldproperty import FieldProperty
from z3c.form.browser.text import TextWidget
from z3c.form.widget import Widget, FieldWidget
from z3c.form.interfaces import ITextWidget, IFormLayer, IFieldWidget

class IQuantityWidget(ITextWidget):
    """"""

    step = schema.Int(title=u"step", required=False)
    min_value = schema.Int(title=u"min", required=False)
    max_value = schema.Int(title=u"max", required=False)
    
@zope.interface.implementer_only(IQuantityWidget)
class QuantityWidget(TextWidget):
    """QuantityWidget"""
    
    step = FieldProperty(IQuantityWidget['step'])
    min_value = FieldProperty(IQuantityWidget['min_value'])
    max_value = FieldProperty(IQuantityWidget['max_value'])
    
@zope.component.adapter(zope.schema.interfaces.IField, IFormLayer)
@zope.interface.implementer(IFieldWidget)
def QuantityFieldWidget(field, request):
    """IFieldWidget factory for QuantityWidget."""
    return FieldWidget(field, QuantityWidget(request))

